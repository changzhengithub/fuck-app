{"source":"webpackJsonp([20],{Hk30:function(t,s,n){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:!0});var e=n(\"VU/8\")({name:\"SendCardComponent\",props:[\"cardInfo\",\"userid\"],data:function(){return{}},components:{},methods:{cancel:function(){this.$emit(\"CANCEL_EVENT\")},send:function(){this.$emit(\"SEND_EVENT\")}}},{render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"section\",{staticClass:\"send-card bg-white padding-top-21\"},[n(\"div\",{staticClass:\"card-title padding-horizontal-30\"},[n(\"span\",{staticClass:\"font-30 color-black\"},[t._v(\"发送给\"+t._s(t.cardInfo.target))])]),t._v(\" \"),n(\"div\",{staticClass:\"content-item padding-horizontal-30 border-bottom-1\"},[n(\"div\",{staticClass:\"item-portrait\"},[n(\"img\",{attrs:{src:t.cardInfo.money}})]),t._v(\" \"),n(\"div\",{staticClass:\"item-detail padding-horizontal-30\"},[n(\"p\",{staticClass:\"font-27 color-black\"},[t._v(t._s(t.cardInfo.title))]),t._v(\" \"),n(\"p\",{staticClass:\"font-21 color-deep-grey\"},[n(\"span\",[t._v(\"借条ID：\")]),n(\"span\",[t._v(t._s(t.userid))])])])]),t._v(\" \"),n(\"div\",{staticClass:\"card-buttons\"},[n(\"button\",{staticClass:\"button\",on:{click:t.cancel}},[n(\"div\",{staticClass:\"font-27 color-black\"},[t._v(\"取消\")])]),t._v(\" \"),n(\"button\",{staticClass:\"button\",on:{click:t.send}},[n(\"div\",{staticClass:\"font-27 color-blue\"},[t._v(\"发送\")])])])])},staticRenderFns:[]},!1,function(t){n(\"Q8Vz\")},\"data-v-0eb41a1c\",null).exports,o=n(\"O5qx\"),a=n(\"JXx5\"),i=n(\"V7vM\"),c=n(\"NgAuo\"),r={name:\"SelectFriendComponent\",data:function(){return{friends:[],cardInfo:{},userid:\"\",modalShow:!1,title:{contentText:\"选择好友\"}}},components:{TitleComponent:n(\"D7rtX\").a,ModalComponent:c.a,SendCardComponent:e},created:function(){this.init()},methods:{init:function(){var s=[];if(this.$store.state.friends){this.$store.state.friends.forEach(function(t){s.push(t.account)});for(var t=0;t<s.length;t+=150)this.getUserInfo(s.slice(t,t+150))}},getUserInfo:function(t){var s=this;o.a.getUserInfo(t).success(function(t){t.forEach(function(t){t.avatar||(t.avatar=\"../../../../static/img/master.png\"),t.custom=JSON.parse(t.custom),t.userid=t.custom.userid.substr(0,3)+\"****\"+t.custom.userid.substr(-4),s.friends.push(t)})})},selectFriend:function(t){this.cardInfo={target:o.a.target.id,id:t.custom.userid,title:t.nick?t.nick:t.custom.userid,money:t.avatar},this.userid=t.userid,this.modalShow=!0},sendCard:function(){o.a.sendBusinessCard(this.cardInfo).success(function(t){i.a.customMsg=t,console.log(i.a.customMsg),t&&a.a.push(\"chat\")})},closeModal:function(){this.modalShow=!1}}},d=n(\"VU/8\")(r,{render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e(\"section\",{staticClass:\"select-friend padding-top-126\"},[e(\"TitleComponent\",{attrs:{title:n.title},on:{OTHER_EVENT:function(t){n.gotoPage(\"personal-info\")}}}),n._v(\" \"),e(\"div\",{staticClass:\"friend-content padding-left-30 bg-white\"},n._l(n.friends,function(s,t){return e(\"div\",{key:t,staticClass:\"content-item border-bottom-1\",on:{click:function(t){n.selectFriend(s)}}},[e(\"div\",{staticClass:\"item-portrait\"},[e(\"img\",{attrs:{src:s.avatar}})]),n._v(\" \"),e(\"div\",{staticClass:\"item-detail padding-horizontal-30\"},[e(\"p\",{staticClass:\"font-30 color-black\"},[n._v(n._s(s.nick))]),n._v(\" \"),e(\"p\",{staticClass:\"font-27 color-deep-grey\"},[e(\"span\",[n._v(\"借条ID：\")]),e(\"span\",[n._v(n._s(s.userid))])])])])})),n._v(\" \"),e(\"ModalComponent\",{directives:[{name:\"show\",rawName:\"v-show\",value:n.modalShow,expression:\"modalShow\"}],on:{CLOSE_EVENT:n.closeModal}},[e(\"SendCardComponent\",{directives:[{name:\"show\",rawName:\"v-show\",value:n.modalShow,expression:\"modalShow\"}],attrs:{cardInfo:n.cardInfo,userid:n.userid},on:{CANCEL_EVENT:n.closeModal,SEND_EVENT:n.sendCard}})],1)],1)},staticRenderFns:[]},!1,function(t){n(\"POth\")},\"data-v-20558e9a\",null);s.default=d.exports},POth:function(t,s){},Q8Vz:function(t,s){}});"}