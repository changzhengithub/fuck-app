{"source":"webpackJsonp([23],{\"79Um\":function(t,e){},\"8h5P\":function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=n(\"Gu7T\"),r=n.n(s),c=n(\"O5qx\"),a=n(\"JXx5\"),i=n(\"V7vM\"),o=n(\"SEgk\"),l={name:\"NewFriendComponent\",data:function(){return{verifyMessage:[],title:{contentText:\"验证消息\",rightText:\"清空\"}}},components:{TitleComponent:n(\"D7rtX\").a},created:function(){this.init()},methods:{init:function(){var i=this;c.a.localSysMsgs().success(function(t){if(0!==t.sysMsgs.length){c.a.markSysMsgRead(t.sysMsgs);var a=[];i.verifyMessage=t.sysMsgs,t.sysMsgs.forEach(function(e,s){e.verifyTime=i.dealTime(e.time),a.push(e.from),c.a.getUserInfo(e.from).success(function(t){i.verifyMessage[s].portrait=t.avatar?t.avatar:n(\"0wbT\"),i.verifyMessage[s].name=t.nick?t.nick:t.account,\"deleteFriend\"===e.type&&(i.verifyMessage[s].ps=\"你已被好友删除\"),\"passFriendApply\"===e.type&&(i.verifyMessage[s].ps=\"通过了你的好友请求\"),\"rejectFriendApply\"===e.type&&(i.verifyMessage[s].ps=\"拒绝了你的好友请求\"),i.verifyMessage=[].concat(r()(i.verifyMessage))})})}})},passApply:function(t,e){var s=this;c.a.passFriendApply(t,t.from).success(function(t){s.verifyMessage[e].state=\"passed\"})},rejectApply:function(t,e){var s=this;c.a.rejectFriendApply(t,t.from).success(function(t){s.verifyMessage[e].state=\"rejected\"})},clearVerify:function(){var e=this;c.a.deleteLocalSysMsgs().success(function(t){e.verifyMessage=[],i.a.verifyMessage=e.verifyMessage})},dealTime:function(t){var e=new Date((new Date).setHours(0,0,0,0)),s=new Date((new Date).setHours(0,0,0,0))-864e5;return e<t?12<o.a.format(\"HH\",t)?\"下午  \"+o.a.format(\"hh : mm\",t):\"上午  \"+o.a.format(\"hh : mm\",t):s<t?\"昨天\":o.a.format(\"YYYY-MM-DD\",t)},gotoPage:function(t){a.a.push(t)}},watch:{\"$store.state.verifyMessage\":function(t){var e=this;if(\"friend\"===t.category){c.a.markSysMsgRead(t),\"deleteFriend\"===t.type&&(t.ps=\"你已被好友删除\"),\"passFriendApply\"===t.type&&(t.ps=\"通过了你的好友请求\"),\"rejectFriendApply\"===t.type&&(t.ps=\"拒绝了你的好友请求\");var s=t;c.a.getUserInfo(t.from).success(function(t){s.portrait=t.avatar?t.avatar:n(\"0wbT\"),s.name=t.nick?t.nick:t.account,e.verifyMessage.push(s)})}}}},f=n(\"VU/8\")(l,{render:function(){var a=this,t=a.$createElement,i=a._self._c||t;return i(\"section\",{staticClass:\"new-friend padding-top-126 bg-white\"},[i(\"TitleComponent\",{attrs:{title:a.title},on:{OTHER_EVENT:a.clearVerify}}),a._v(\" \"),i(\"ul\",{staticClass:\"friend-list padding-horizontal-24 bg-white\"},a._l(a.verifyMessage,function(e,s){return i(\"li\",{key:s,staticClass:\"list-item border-bottom-1\"},[i(\"div\",{staticClass:\"item-portrait\"},[i(\"img\",{attrs:{src:e.portrait}})]),a._v(\" \"),i(\"div\",{staticClass:\"item-detail\"},[i(\"div\",{staticClass:\"detail-message\"},[i(\"p\",{staticClass:\"message-title\"},[i(\"span\",{staticClass:\"title-name font-27 color-light-blue\"},[a._v(a._s(e.name))]),a._v(\" \"),i(\"span\",{staticClass:\"title-time font-18 color-light-grey\"},[a._v(a._s(e.verifyTime))])]),a._v(\" \"),i(\"p\",{staticClass:\"message-tip font-24 color-light-grey\"},[a._v(a._s(e.ps))])]),a._v(\" \"),\"applyFriend\"==e.type?i(\"div\",{staticClass:\"detail-right\"},[\"init\"==e.state?i(\"div\",{staticClass:\"right-button\"},[i(\"button\",{staticClass:\"button color-white\",on:{click:function(t){a.passApply(e,s)}}},[i(\"div\",[a._v(\"同意\")])]),a._v(\" \"),i(\"button\",{staticClass:\"button color-white\",on:{click:function(t){a.rejectApply(e,s)}}},[i(\"div\",[a._v(\"拒绝\")])])]):a._e(),a._v(\" \"),\"passed\"==e.state?i(\"div\",{staticClass:\"right-status\"},[i(\"span\",{staticClass:\"font-24 color-black\"},[a._v(\"已同意\")])]):a._e(),a._v(\" \"),\"rejected\"==e.state?i(\"div\",{staticClass:\"right-status\"},[i(\"span\",{staticClass:\"font-24 color-black\"},[a._v(\"已拒绝\")])]):a._e()]):a._e()])])}))],1)},staticRenderFns:[]},!1,function(t){n(\"79Um\")},\"data-v-f5e7fd5a\",null);e.default=f.exports}});"}