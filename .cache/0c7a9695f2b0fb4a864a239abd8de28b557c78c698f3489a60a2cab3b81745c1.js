{"source":"webpackJsonp([8],{\"8/8y\":function(t,e){},\"9Bxw\":function(t,e,o){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=o(\"VU/8\")({name:\"PublishComponent\",data:function(){return{dayList:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\"],isIndex:null,selectDay:\"\"}},components:{},methods:{switchtDay:function(t,e){this.isIndex=e,this.selectDay=t},cancel:function(){this.$emit(\"CANCEL_PUBLISH_EVENT\")},getDay:function(){this.$emit(\"SELECT_PUBLISH_EVENT\",this.selectDay)}}},{render:function(){var s=this,t=s.$createElement,i=s._self._c||t;return i(\"section\",{staticClass:\"publish\"},[i(\"div\",{staticClass:\"publish-content\"},[i(\"div\",{staticClass:\"content-button\"},[i(\"button\",{staticClass:\"button\",on:{click:s.cancel}},[i(\"div\",[s._v(\"取消\")])]),s._v(\" \"),i(\"button\",{staticClass:\"button\",on:{click:s.getDay}},[i(\"div\",[s._v(\"确认\")])])]),s._v(\" \"),i(\"nav\",{staticClass:\"content-nav\"},[i(\"ul\",{staticClass:\"nav-list\"},s._l(s.dayList,function(e,o){return i(\"li\",{key:o,staticClass:\"list-item\",class:{active:s.isIndex===o},on:{click:function(t){s.switchtDay(e,o)}}},[s._v(s._s(e))])}))])])])},staticRenderFns:[]},!1,function(t){o(\"byAt\")},\"data-v-42873c37\",null).exports,i=o(\"O5qx\"),n=o(\"gtFV\"),a=o(\"poUI\"),r=o(\"NeIm\"),c=o(\"JXx5\"),l=o(\"V7vM\"),u=o(\"vPt9U\"),h={name:\"DeadlineComponent\",data:function(){return{currentYear:(new Date).getFullYear(),currentMonth:(new Date).getMonth(),yearList:[],mouthList:[],dayList:[],mouth:\"\",day:\"\",days:[],year:\"\",yearStr:\"\",mouthStr:\"\",dayStr:\"\"}},components:{},created:function(){this.init()},methods:{init:function(){var t=1*(new Date).getFullYear();this.yearList=[t,t+1,t+2],this.setMouth(),this.setDays()},setMouth:function(){var t=[],e=0;for((0<arguments.length&&void 0!==arguments[0]?arguments[0]:(new Date).getFullYear())===this.currentYear&&(e=1*(new Date).getMonth());e<12;)t.push(e+1),e++;this.mouthList=t},setDays:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:(new Date).getFullYear(),e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(new Date).getMonth(),o=[31,28,31,30,31,30,31,31,30,31,30,31];t%4!=0||t%100==0&&t%400!=0||(o[1]=29);var s=[],i=1;for(t===this.currentYear&&e===this.currentMonth&&(i=(new Date).getDate());i<=o[e];)s.push(i),i++;this.dayList=s},selectYear:function(t,e){this.mouth=null,this.day=null,this.year=t,this.setMouth(this.year)},selectMouth:function(t,e){this.year&&(this.day=null,this.mouth=t,this.setDays(this.year,t-1))},selectDay:function(t,e){this.mouth&&(this.day=t)},selectData:function(){this.year&&this.mouth&&this.day&&this.$emit(\"SELECT_DATA_EVENT\",this.year,this.mouth,this.day)},cancel:function(){this.$emit(\"CANCEL_EVENT\")}}},d=o(\"VU/8\")(h,{render:function(){var s=this,t=s.$createElement,i=s._self._c||t;return i(\"section\",{staticClass:\"deadline\"},[i(\"div\",{staticClass:\"deadline-content\"},[i(\"div\",{staticClass:\"content-button\"},[i(\"button\",{on:{click:s.cancel}},[i(\"div\",[s._v(\"取消\")])]),s._v(\" \"),i(\"button\",{on:{click:s.selectData}},[i(\"div\",[s._v(\"确认\")])])]),s._v(\" \"),i(\"nav\",{staticClass:\"content-nav\"},[i(\"div\",{staticClass:\"nav-area\"},[i(\"ul\",{staticClass:\"area-list\"},s._l(s.yearList,function(e,o){return i(\"li\",{key:o,staticClass:\"list-item\",class:{active:s.year===e},on:{click:function(t){s.selectYear(e,o)}}},[s._v(s._s(e))])})),s._v(\" \"),i(\"ul\",{staticClass:\"area-list\"},s._l(s.mouthList,function(e,o){return i(\"li\",{key:o,staticClass:\"list-item\",class:{active:s.mouth===e},on:{click:function(t){s.selectMouth(e,o)}}},[s._v(s._s(e))])})),s._v(\" \"),i(\"ul\",{staticClass:\"area-list\"},s._l(s.dayList,function(e,o){return i(\"li\",{key:o,staticClass:\"list-item\",class:{active:s.day===e},on:{click:function(t){s.selectDay(e,o)}}},[s._v(s._s(e))])}))])])])])},staticRenderFns:[]},!1,function(t){o(\"8/8y\")},\"data-v-d1dcfaf4\",null).exports,m=o(\"YzZEr\"),v={name:\"BorrowComponent\",data:function(){return{borrowType:1,borrowDate:\"\",rateAmount:0,ratePercent:\"\",borrowAmount:\"\",paymentTotl:\"\",borrowObject:\"请选择\",borrowNameStr:\"\",borrowPhoneStr:\"\",borrowImAccidStr:\"\",borrowDeadline:\"7\",borrowPublish:\"3\",borrowPurpose:\"临时周转\",otherCost:0,purposeShow:!1,deadLineShow:!1,title:{contentText:\"我要借款\"},button:{default:[{type:\"primary\",text:\"发布借条\"}]},tip:{type:\"default\",content:\"已同意协议\",protocol:\"借条大师协议\",icon:\"jindu\",selected:\"true\"}}},components:{TitleComponent:o(\"D7rtX\").a,ButtonComponent:u.a,TipComponent:m.a,DeadlineComponent:d,PublishComponent:s},created:function(){this.initDate(7),this.getBorrowType(l.a.borrowType),l.a.publishObject&&this.formateData(l.a.publishObject),l.a.purpose&&(this.borrowPurpose=l.a.purpose),l.a.wannaInfo&&(this.borrowAmount=l.a.wannaInfo.borrowAmount,this.ratePercent=l.a.wannaInfo.ratePercent,this.borrowDeadline=l.a.wannaInfo.period,this.borrowPublish=l.a.wannaInfo.borrowPublish,this.otherCost=l.a.wannaInfo.otherCost,this.borrowDate=l.a.wannaInfo.borrowDate)},mounted:function(){this.scroll()},methods:{formateData:function(t){if(t){var e=[],o=[],s=[];t.forEach(function(t){e.push(t.Name),o.push(t.Phone),s.push(t.imAccid)}),this.borrowNameStr=e.toString(),this.borrowPhoneStr=o.toString(),this.borrowImAccidStr=s.toString(),1<e.length?this.borrowObject=\"好友\":this.borrowObject=this.borrowNameStr}},getBorrowType:function(t){2===t&&(this.title.contentText=\"打欠条\")},scroll:function(){var e=document.getElementById(\"tip\"),o=e.offsetLeft;setInterval(function(){var t=e.offsetLeft;e.style.left=t-1+\"px\",e.offsetLeft<=o-e.offsetWidth&&(e.style.left=e.offsetWidth+o-30+\"px\")},8)},initDate:function(t){var e=new Date;e.setDate(e.getDate()+t);var o=e.getFullYear(),s=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,i=e.getDate()<10?\"0\"+e.getDate():e.getDate();this.borrowDate=o+\"-\"+s+\"-\"+i},getDeadline:function(t,e,o){var s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);var i=new Date(t,e-1,o).getTime()-s.getTime();this.borrowDeadline=parseInt(i/1e3/60/60/24)+1,this.rateAmount=parseFloat(this.borrowAmount*this.ratePercent/100/365*this.borrowDeadline).toFixed(1),this.borrowDate=t+\"-\"+(e<10?\"0\"+e:e)+\"-\"+(o<10?\"0\"+o:o),this.deadLineShow=!1},gotoPage:function(t){\"iou-template\"===l.a.origin.name&&\"publish-object\"===t||(l.a.wannaInfo={borrowAmount:this.borrowAmount,ratePercent:this.ratePercent,borrowPublish:this.borrowPublish,period:this.borrowDeadline,otherCost:this.otherCost,borrowDate:this.borrowDate},c.a.push(t))},getPublish:function(t){this.purposeShow=!1,this.borrowPublish=t},getTipSelected:function(t){this.tip.selected=t},limitBorrowAmount:function(){(parseInt(this.borrowAmount)<0||1e4<parseInt(this.borrowAmount))&&(a.a.show(\"请输入0~10000值\"),this.borrowAmount=\"\")},limitRatePercent:function(){(this.ratePercent<0||24<this.ratePercent)&&(a.a.show(\"请输入0~24的利率\"),this.ratePercent=\"\")},checkPercent:function(t){return isNaN(this.ratePercent)?(a.a.show(\"请输入数字\"),!1):this.ratePercent?!!parseInt(this.ratePercent)||(a.a.show(\"请输入大于0的利率\"),!1):(a.a.show(\"请输入利率\"),!1)},publishSubmit:function(){var e=this;if(n.a.money(this.borrowAmount.toString())&&this.checkPercent(this.borrowAmount))if(this.tip.selected){var o={content:i.a.target.id,money:this.borrowAmount,title:1===this.borrowType?\"向你打个借条\":\"向你打了个欠条\"};r.a.send({url:\"Create\",data:{token:l.a.token,phone:l.a.phone,type:this.borrowType,amount:this.borrowAmount,lendPhones:this.borrowPhoneStr,imAccid:this.borrowImAccidStr,yearRate:this.ratePercent,Interest:this.rateAmount,period:this.borrowDeadline,otherCost:this.otherCost,purpose:this.borrowPurpose,purposeReason:l.a.opinion,expireDay:this.borrowPublish}}).success(function(t){l.a.borrowId=t.Id,1===e.borrowType&&i.a.createMainIOU(o).success(function(t){console.log(t)}),2===e.borrowType&&i.a.createAttachmentIOU(o).success(function(t){console.log(t)})}).fail(function(t){})}else a.a.show(\"请同意协议\")},openDeadlineModal:function(){this.deadLineShow=!0},openPublishMadol:function(){this.purposeShow=!0},closeModal:function(){this.purposeShow=!1,this.deadLineShow=!1}},watch:{ratePercent:function(t,e){this.borrowAmount&&(this.rateAmount=parseFloat(this.borrowAmount*t/100/365*this.borrowDeadline).toFixed(1),this.paymentTotl=parseInt(this.borrowAmount)+parseFloat(this.rateAmount))}}},p=o(\"VU/8\")(v,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"section\",{staticClass:\"borrow padding-top-126\"},[o(\"TitleComponent\",{attrs:{title:e.title}}),e._v(\" \"),e._m(0),e._v(\" \"),o(\"div\",{staticClass:\"borrow-form-top\"},[o(\"div\",{staticClass:\"form-item\"},[e._m(1),e._v(\" \"),o(\"div\",{staticClass:\"itme-default\"},[o(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.borrowAmount,expression:\"borrowAmount\"}],attrs:{type:\"number\",placeholder:\"10的倍数\"},domProps:{value:e.borrowAmount},on:{keyup:e.limitBorrowAmount,input:function(t){t.target.composing||(e.borrowAmount=t.target.value)}}}),e._v(\" \"),o(\"span\",[e._v(\"元\")])])]),e._v(\" \"),o(\"div\",{staticClass:\"form-item\"},[e._m(2),e._v(\" \"),o(\"div\",{staticClass:\"item-rate\"},[o(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.ratePercent,expression:\"ratePercent\"}],attrs:{type:\"number\",placeholder:\"0~24\"},domProps:{value:e.ratePercent},on:{keyup:e.limitRatePercent,input:function(t){t.target.composing||(e.ratePercent=t.target.value)}}}),e._v(\" \"),o(\"span\",[e._v(\"%\")]),e._v(\" \"),o(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.rateAmount,expression:\"rateAmount\"}],attrs:{type:\"number\",placeholder:\"利率金额\"},domProps:{value:e.rateAmount},on:{input:function(t){t.target.composing||(e.rateAmount=t.target.value)}}}),e._v(\" \"),o(\"span\",[e._v(\"￥\")])])]),e._v(\" \"),o(\"div\",{staticClass:\"form-item\"},[e._m(3),e._v(\" \"),o(\"div\",{staticClass:\"itme-deadline\"},[o(\"span\",{staticClass:\"deadline-date\",on:{click:e.openDeadlineModal}},[e._v(e._s(e.borrowDate))]),e._v(\" \"),o(\"span\",[e._v(e._s(e.borrowDeadline))]),e._v(\" \"),o(\"span\",[e._v(\"天\")])])])]),e._v(\" \"),o(\"div\",{staticClass:\"borrow-form-bottom\"},[o(\"div\",{staticClass:\"form-item\"},[e._m(4),e._v(\" \"),o(\"div\",{staticClass:\"itme-default\",on:{click:function(t){e.gotoPage(\"purpose\")}}},[o(\"span\",{staticClass:\"default-value\"},[e._v(e._s(e.borrowPurpose))]),e._v(\" \"),o(\"i\",{staticClass:\"iconfont icon-arrow-right\"})])]),e._v(\" \"),o(\"div\",{staticClass:\"form-item\"},[e._m(5),e._v(\" \"),o(\"div\",{staticClass:\"itme-default\",on:{click:function(t){e.gotoPage(\"publish-object\")}}},[o(\"span\",{staticClass:\"default-value\"},[e._v(e._s(e.borrowObject))]),e._v(\" \"),o(\"i\",{staticClass:\"iconfont icon-arrow-right\"})])]),e._v(\" \"),o(\"div\",{staticClass:\"form-item\"},[e._m(6),e._v(\" \"),o(\"div\",{staticClass:\"itme-default\",on:{click:e.openPublishMadol}},[o(\"span\",{staticClass:\"default-value\"},[e._v(e._s(e.borrowPublish))]),e._v(\" \"),o(\"i\",{staticClass:\"iconfont icon-arrow-right\"})])]),e._v(\" \"),o(\"div\",{staticClass:\"form-refund\"},[o(\"span\",[e._v(\"实际到账金额\")]),e._v(\" \"),o(\"span\",{staticClass:\"refund-actual\"},[e._v(e._s(e.borrowAmount?e.borrowAmount:0)+\"元\")]),e._v(\" \"),o(\"span\",[e._v(\"到期还款总额\")]),e._v(\" \"),o(\"span\",{staticClass:\"refund-total\"},[e._v(e._s(e.paymentTotl?e.paymentTotl:0)+\"元\")])])]),e._v(\" \"),o(\"div\",{staticClass:\"borrow-potocol\"},[o(\"TipComponent\",{attrs:{tip:e.tip},on:{TOGGLE_SELECTED_EVENT:e.getTipSelected}})],1),e._v(\" \"),o(\"div\",{staticClass:\"borrow-submit\"},[o(\"ButtonComponent\",{attrs:{button:e.button},on:{SUBMIT_EVENT:e.publishSubmit}})],1),e._v(\" \"),o(\"DeadlineComponent\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.deadLineShow,expression:\"deadLineShow\"}],on:{SELECT_DATA_EVENT:e.getDeadline,CANCEL_EVENT:e.closeModal}}),e._v(\" \"),o(\"PublishComponent\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.purposeShow,expression:\"purposeShow\"}],on:{SELECT_PUBLISH_EVENT:e.getPublish,CANCEL_PUBLISH_EVENT:e.closeModal}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"borrow-tip\"},[e(\"div\",{staticClass:\"tip-icon\"},[e(\"i\",{staticClass:\"iconfont icon-dunpai\"})]),this._v(\" \"),e(\"p\",{staticClass:\"tip-text\",attrs:{id:\"tip\"}},[this._v('警惕\"扫码退款\"转账到安全账户\"等骗术\",请保护好你的资金安全')])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"item-left\"},[e(\"i\",{staticClass:\"iconfont icon-yuandian\"}),this._v(\" \"),e(\"span\",[this._v(\"借款金额\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"item-left\"},[e(\"i\",{staticClass:\"iconfont icon-yuandian\"}),this._v(\" \"),e(\"span\",[this._v(\"年华利率\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"item-left\"},[e(\"i\",{staticClass:\"iconfont icon-yuandian\"}),this._v(\" \"),e(\"span\",[this._v(\"还款期限\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"item-left\"},[e(\"i\",{staticClass:\"iconfont icon-yuandian\"}),this._v(\" \"),e(\"span\",[this._v(\"借款用途\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"item-left\"},[e(\"i\",{staticClass:\"iconfont icon-yuandian\"}),this._v(\" \"),e(\"span\",[this._v(\"发布对象\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"item-left\"},[e(\"i\",{staticClass:\"iconfont icon-yuandian\"}),this._v(\" \"),e(\"span\",[this._v(\"借款发布期\")])])}]},!1,function(t){o(\"I4UL\")},\"data-v-240d87eb\",null);e.default=p.exports},I4UL:function(t,e){},byAt:function(t,e){}});"}